# ğŸ“‘ HDFS(Hadoop Distributed File System)

- í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰ë˜ëŠ” ë§¤ìš° í° íŒŒì¼ì„ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ê³„ëœ íŒŒì¼ ì‹œìŠ¤í…œ
- í•œë²ˆ ì“°ê³  ì—¬ëŸ¬ë²ˆ ì½ëŠ” ê²ƒì´ ëª©ì 
- ì €ì‚¬ì–‘ì˜ ì„œë²„ë¥¼ ì´ìš©í•˜ì—¬ ìŠ¤í† ë¦¬ì§€ êµ¬ì„± ê°€ëŠ¥
- ìë°”ê¸°ë°˜ íŒŒì¼ ì‹œìŠ¤í…œ â†’ JVMì—ì„œ ë™ì‘
---   
## ğŸ– ì•ˆì „ì„±ì„ ìœ„í•œ ì „ëµ

- **ì¥ì• ë³µêµ¬** : ë°ì´í„° ì¤‘ë³µì €ì¥
- **ë°ì´í„° ë¬´ê²°ì„±(ì¼ê´€ì„±)** : í•œë²ˆ ì €ì¥í•œ ë°ì´í„°ëŠ” read ONLY
---   
## ğŸ– HDFS ì•„í‚¤í…ì²˜

### â˜‘ **ë¸”ë¡êµ¬ì¡°** íŒŒì¼ ì‹œìŠ¤í…œ

- ëŒ€ìš©ëŸ‰ íŒŒì¼ì„ ë¸”ë¡ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬
- ë¸”ë¡í¬ê¸° ê¸°ë³¸ì  64MB
- ì„¤ì •ì„ í†µí•´ ë³€ê²½ ê°€ëŠ¥
- ì¥ì  : ë””ìŠ¤í¬ ì‹œíŠ¸íƒ€ì„ ê°ì†Œ, ë©”íƒ€ë°ì´í„° í¬ê¸° ê°ì†Œ ( ë©”íƒ€ë°ì´í„°ëŠ” ë„¤ì„ë…¸ë“œì˜ í™ ë©”ëª¨ë¦¬ì— ì €ì¥)

![image](https://user-images.githubusercontent.com/72757829/107148805-8c04c380-6998-11eb-926a-fcbc250c0c06.png)

### â˜‘ ë§ˆìŠ¤í„°-ìŠ¬ë ˆì´ë¸Œ(Master-Slave) êµ¬ì¡°

âœ” **ë„¤ì„ë…¸ë“œ(ê´€ë¦¬ì)** 

- ë§ˆìŠ¤í„° ì„œë²„ ì—­í• 
- íŒŒì¼ ì‹œìŠ¤í…œì˜ ì „ë°˜ì ì¸ ë¶€ë¶„
- ë„¤ì„ë…¸ë“œê°€ ê³ ì¥ë‚˜ë©´  ì „ì²´ ì‹œìŠ¤í…œ ì‘ë™ X

âœ” **ë°ì´í„° ë…¸ë“œ(ì‘ì—…ì)**

- ì£¼ë¡œ íŒŒì¼ ì €ì¥, ë¶„ì‚°ì²˜ë¦¬ì™€ ê°™ì´ ì‹¤ì œì  ì¼ì„ ìˆ˜í–‰

### â˜‘ NN(ë„¤ì„ë…¸ë“œ)ì˜ ì—­í• 

1. **ë©”íƒ€ë°ì´í„° ê´€ë¦¬**
    - ë©”íƒ€ë°ì´í„° = íŒŒì¼ì‹œìŠ¤í…œ ì´ë¯¸ì§€ + íŒŒì¼ì— ëŒ€í•œ ë¸”ë¡ë§¤í•‘ ì •ë³´ â†’ ë¹ ë¥¸ íŒŒì¼ ì²˜ë¦¬ë¥¼ ìœ„í•´ ë©”ëª¨ë¦¬ ê´€ë¦¬
2. **ë°ì´í„° ë…¸ë“œ ê°ì‹œ**
    - ë°ì´í„° ë…¸ë“œëŠ” ë„¤ì„ë…¸ë“œì—ê²Œ í•˜íŠ¸ë¹„íŠ¸ ë©”ì„¸ì§€ ì£¼ê¸°ì  ì „ì†¡ â†’ ìˆ˜ì‹ ì´ ì—†ë‹¤ë©´ ì¥ì• ë°œìƒìœ¼ë¡œ ê°„ì£¼
3. **í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ì²˜ë¦¬**
    - í´ë¼ì´ì–¸íŠ¸ëŠ” HDFSì— íŒŒì¼ IOë¥¼ ìˆ˜í–‰í•  ë•Œ NNì˜ í—ˆê°€ë¥¼ ë°›ìŒ â†’ ìœ íš¨ì„± ê²€ì‚¬

---   
## ğŸ– ë³µì œë³¸ ë°°ì¹˜ ì „ëµ
![image](https://user-images.githubusercontent.com/72757829/107201079-dc812d00-6a3b-11eb-9837-dc1795a7c5bc.png)   
```
ì²« ë³µì œ(ì„ì˜ ë™) â†’ ë‘ë²ˆì§¸ ë³µì œ(ì²«ë²ˆì§¸ì™€ ë‹¤ë¥¸ ë™) â†’ ì„¸ë²ˆì§¸ ë³µì œ(ë‘ë²ˆì§¸ì™€ ê°™ì€ ë™, ë‹¤ë¥¸ ë…¸ë“œ) â†’ ì´í›„(í´ëŸ¬ìŠ¤í„°ì—ì„œ ë¬´ì‘ìœ„ ì„ íƒ
```   
```
â†’ **ì‹ ë¢°ì„±**ê³¼ **ëŒ€ì—­í­** ì‚¬ìš©ì€ **íŠ¸ë ˆì´ë“œ ì˜¤í”„** ê´€ê³„
â†’ ê· í˜•ì˜ ì¡°í™”
```   

> - ë¸”ë¡ì„ ë‘ ë™ì— ì €ì¥ : ì‹ ë¢°ì„±
> - ì“°ê¸° ëŒ€ì—­í­ : í†µê³¼í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ìŠ¤ìœ„ì¹˜ ê°œìˆ˜ ì¶•ì†Œ
> - ì½ê¸° ì„±ëŠ¥ : ë‘ ë™ì—ì„œ ê°€ê¹Œìš´ ë™ ì„ íƒ

---   
## ğŸ– ë³´ì¡° ë„¤ì„ ë…¸ë“œ

â˜‘ **ì—­í• **
- ì£¼ ì‹œìŠ¤í…œì— ë¬¸ì œê°€ ìƒê²¼ì„ ë•Œ ì£¼ ì‹œìŠ¤í…œ ê¸°ëŠ¥ ëŒ€ì²´ ì—­í• 
- ì£¼ ë„¤ì„ë…¸ë“œê°€ ìœ ì§€í•˜ëŠ” **editslog íŒŒì¼ì´ ë¬´í•œì • ì»¤ì§€ëŠ” ê²ƒì„ ë§‰ì•„ì¤Œ**

âœ” **fsimage íŒŒì¼**

- ë„¤ì„ë…¸ë“œëŠ” ìì‹ ì˜ íŒŒì¼ì‹œìŠ¤í…œì˜ ë©”íƒ€ë°ì´í„° ì •ë³´ë¥¼ ìœ ì§€íˆì•¼í•¨
- ë©”íƒ€ë©”ì´í„°ëŠ” ë©”ëª¨ë¦¬ì—ì„œ ê´€ë¦¬ â†’ ë¹ ë¥¸ ì²˜ë¦¬ ëª©ì 
- ë©”ëª¨ë¦¬ì— ì ì¬ëœ ë°ì´í„°ëŠ” ì†ì‹¤ìœ„í—˜ì´ ë†’ìŒ â†’ fsimage íŒŒì¼ë¡œ ë§Œë“¤ì–´ ë¡œì»¬ íŒŒì¼ì‹œìŠ¤í…œì— ì €ì¥
- fsimageëŠ” ë³€ê²½ ì •ë³´ë¥¼ ë°˜ì˜í•˜ì—¬ ì£¼ê¸°ì ìœ¼ë¡œ ê°±ì‹ 

âœ” **editslog íŒŒì¼**

- HDFSì—ì„œ ë°œìƒí•˜ëŠ” ëª¨ë“  ë³€ê²½ì´ë ¥ ì €ì¥

> old fsimage + editslog = new fsimage

### ğŸ‘€ ë„¤ì„ë…¸ë“œê°€ íŒŒì¼ ì‹œìŠ¤í…œ ê´€ë¦¬í•˜ëŠ” ë°©ë²•
```text
1. ë„¤ì„ë…¸ë“œê°€ ì‹œì‘ë˜ë©´ fsimageë¥¼ ë©”ëª¨ë¦¬ì— ë¡œë”©
2. ë©”ëª¨ë¦¬ì— ë¡œë”©ëœ fsimageì— editslogì— ê¸°ë¡ëœ ë‚´ìš© ë³‘í•©
3. editslog ì´ˆê¸°í™”
4. ë°ì´í„° ë…¸ë“œê°€ ì „ì†¡í•œ ë©”ì‹œì§€ í†µí•´ ë¸”ë¡ ì €ì¥ í˜„í™© íŒŒì•…
```   

> editslogíŒŒì¼ì€ ìš©í–¥ ì œí•œ X ... í¬ê¸°ê°€ ë„ˆë¬´ í¬ë©´ 2ë²ˆ ë‹¨ê³„ì— ì—„ì²­ë‚œ ì‹œê°„ ì†Œìš” â€”â€”> **ë³´ì¡°ë„¤ì„ë…¸ë“œì˜ í•„ìš”**    
![image](https://user-images.githubusercontent.com/72757829/107201385-413c8780-6a3c-11eb-9f81-7ba927cec415.png)
