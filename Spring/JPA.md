> 1ê°• í•™ìŠµ

[[í† í¬ONì„¸ë¯¸ë‚˜] JPA í”„ë¡œê·¸ë˜ë° ê¸°ë³¸ê¸° ë‹¤ì§€ê¸° 1ê°• - JPA ì†Œê°œ | Tì•„ì¹´ë°ë¯¸](https://youtu.be/WfrSN9Z7MiA)

# ğŸ“‘ JPA ì‹¤ìŠµ ì¤€ë¹„

### âœ” STS IDE ì„¤ì¹˜

- File -> New -> Spring Starter Project
- Type: Maven ì„ íƒ í›„ Next
- H2, JPA ì„ íƒ í›„ Finish

### âœ” H2 ë°ì´í„° ë² ì´ìŠ¤ ì„¤ì¹˜

- h2í´ë”/bin/h2.sh (ìœˆë„ìš° h2.bat) ì‹¤í–‰
- http://localhost:8082 ì ‘ì†
- ë“œë¼ì´ë²„ í´ë˜ìŠ¤: org.h2.Driver
- JDBC URL: jdbc:h2:tcp://localhost/~/text
- ì‚¬ìš©ìëª…: sa, ë¹„ë°€ë²ˆí˜¸ ìƒëµ í›„ ì—°ê²°

# ğŸ“‘ SQL ì¤‘ì‹¬ì  ê°œë°œì˜ ë¬¸ì œ

- CRUD *ë°˜ë³µì ì„, ì§€ë£¨í•œ ì½”ë“œ*
- í•„ë“œ ì¶”ê°€í•˜ë©´ ì°¾ì•„ì„œ ì—…ë°ì´íŠ¸ í•´ì•¼í•¨
- ì—”í‹°í‹° ì‹ ë¢° ë¬¸ì œ
- ì§„ì •í•œ ì˜ë¯¸ì˜ ê³„ì¸µë¶„í• ì´ ì–´ë ¤ì›€
- SQLì€ ì˜ì¡´ì  ê°œë°œì„ í”¼í•˜ê¸° ì–´ë ¤ì›€

# ğŸ“‘ ê°ì²´ VS ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤

- **ê°ì²´** : OOP.. ì–´ë–»ê²Œ ì¶”ìƒí™” í•´ì„œ ê°ì²´ë¥¼ ê´€ë¦¬í• ê¹Œì— ì´ˆì 
- **ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤** : ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì •ê·œí™”í• ê¹Œì— ì´ˆì 

ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì–µì§€ë¡œ ë§¤í•‘í•´ì„œ ì¼ì„ ì²˜ë¦¬í•´ì•¼í•¨

### âœ” **ì°¨ì´ì **

1. ìƒì†
    - ê°ì²´ëŠ” ìƒì†ê´€ê³„ O
    - ê´€ê³„í˜• DBëŠ” ìƒì†ê´€ê³„ X
2. **ì—°ê´€ê´€ê³„ â†’** ë‘˜ì˜ ì°¨ì´ê°€ ì¤‘ìš”!! 
    - ê°ì²´ëŠ”Â **ì°¸ì¡°**ë¥¼ ì‚¬ìš© â†’ ë°©í–¥ì„± O
    - í…Œì´ë¸”ì€Â **ì™¸ë˜í‚¤**ë¥¼ ì‚¬ìš©  â†’ ë°©í–¥ì„± X
3. ë°ì´í„°íƒ€ì…
4. ë°ì´í„° ì‹ë³„ë°©ë²•
 

# ğŸ“‘ JPA(Java Persistaence API) â†’ ì˜êµ¬ ì €ì¥

> ê°ì²´ë¥¼ ìë°” ì»¬ë ‰ì…˜ì— ì €ì¥í•˜ë“¯ì´ DBì— ì €ì¥í•  ìˆ˜ ì—†ì„ê¹Œ? **JPA ë“±ì¥       
> â‡’ ê°ì²´ì™€ RDB ë‘ ê¸°ë‘¥ìœ„ì— ìˆëŠ” ê¸°ìˆ **        

- ìë°” ì§„ì˜ì˜ **ORM** ê¸°ìˆ  í‘œì¤€

    **ORM**(Object-relational mapping : ê°ì²´ ê´€ê³„ë§¤í•‘)
    - ê°ì²´ëŠ” ê°ì²´ëŒ€ë¡œ ì„¤ê³„
    - ê´€ê³„í˜• DBëŠ” DBëŒ€ë¡œ ì„¤ê³„
    - ORM í”„ë ˆì„ì›Œí¬ê°€ ì¤‘ê°„ì—ì„œ ë§¤í•‘
    - ëŒ€ì¤‘ì  ì–¸ì–´ì—ëŠ” ëŒ€ë¶€ë¶„ ORM ê¸°ìˆ  ì¡´ì¬

- ë°œì „

    EJB(ì—”í‹°í‹° ë¹ˆ-ìë°”í‘œì¤€)  â€”â†’ í•˜ì´ë²„ë„¤ì´íŠ¸(ì˜¤í”ˆì†ŒìŠ¤) â€”â€”> JPA(ìë°”í‘œì¤€)

- **ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ JDBC ì‚¬ì´ì—ì„œ ë™ì‘**

**[ ë™ì‘ê³¼ì • ]**     
```
    ê°œë°œìê°€ JPAë¥¼ ì‚¬ìš©í•˜ë©´, JPA ë‚´ë¶€ì—ì„œ JDBC APIë¥¼ ì‚¬ìš©í•˜ì—¬ SQLì„ í˜¸ì¶œí•˜ì—¬ DBì™€ í†µì‹ í•œë‹¤.
    ì¦‰, ê°œë°œìê°€ ì§ì ‘ JDBC APIë¥¼ ì“°ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.
```        


**[ ì €ì¥ê³¼ì • ]**      
```
    Ex) MemberDAOì—ì„œ ê°ì²´ë¥¼ ì €ì¥í•˜ê³  ì‹¶ì„ ë•Œ
    ê°œë°œìëŠ” JPAì— Member ê°ì²´ë¥¼ ë„˜ê¸´ë‹¤.
    JPAëŠ”
    1) Member ì—”í‹°í‹°ë¥¼ ë¶„ì„í•œë‹¤.
    2) INSERT SQLì„ ìƒì„±í•œë‹¤.
    3) JDBC APIë¥¼ ì‚¬ìš©í•˜ì—¬ SQLì„ DBì— ë‚ ë¦°ë‹¤.
 ```     
 
**[ ì¡°íšŒê³¼ì • ]**     
```
    Ex) Member ê°ì²´ë¥¼ ì¡°íšŒí•˜ê³  ì‹¶ì„ ë•Œ
    ê°œë°œìëŠ” memberì˜ pk ê°’ì„ JPAì— ë„˜ê¸´ë‹¤.
    JPAëŠ”
    1) ì—”í‹°í‹°ì˜ ë§¤í•‘ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì ì ˆí•œ SELECT SQLì„ ìƒì„±í•œë‹¤.
    2) JDBC APIë¥¼ ì‚¬ìš©í•˜ì—¬ SQLì„ DBì— ë‚ ë¦°ë‹¤.
    3) DBë¡œë¶€í„° ê²°ê³¼ë¥¼ ë°›ì•„ì˜¨ë‹¤.
    4) ê²°ê³¼(ResultSet)ë¥¼ ê°ì²´ì— ëª¨ë‘ ë§¤í•‘í•œë‹¤.
    ì¿¼ë¦¬ë¥¼ JPAê°€ ë§Œë“¤ì–´ ì£¼ê¸° ë•Œë¬¸ì— Objectì™€ RDB ê°„ì˜ íŒ¨ëŸ¬ë‹¤ì„ ë¶ˆì¼ì¹˜ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.
```
---

# ğŸ“‘ JPA ì‚¬ìš© ì´ìœ 

### 1. SQLì¤‘ì‹¬ì ì¸ ê°œë°œì—ì„œ **ê°ì²´ ì¤‘ì‹¬ìœ¼ë¡œ ê°œë°œ**

### 2. **ìƒì‚°ì„± - JPAì™€ CRUD**

- ì €ì¥:Â `jpa.persist(member)`
- ì¡°íšŒ:Â `Member member = jpa.find(memberId)`
- ìˆ˜ì •:Â `member.setName("ë³€ê²½í•  ì´ë¦„")`
- ì‚­ì œ:Â `jpa.remove(member)`

### 3. **ìœ ì§€ë³´ìˆ˜**

- ê¸°ì¡´ì—ëŠ” í•„ë“œ ë³€ê²½ ì‹œ ëª¨ë“  SQLìˆ˜ì •í•´ì•¼í•¨
- JPAëŠ” í•„ë“œë§Œ ì¶”ê°€í•˜ë©´ ë¨ â†’ SQLì€ JPAê°€ ì•Œì•„ì„œ ì²˜ë¦¬
- ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì—”í‹°í‹°, ê³„ì¸µ

### 4. íŒ¨ëŸ¬ë‹¤ì„ì˜ ë¶ˆì¼ì¹˜ë¥¼ í•´ê²°

---     
# ğŸ“‘ **JPAì˜ ì„±ëŠ¥ ìµœì í™” ê¸°ëŠ¥**

1. **1ì°¨ ìºì‹œì™€ ë™ì¼ì„±(identity) ë³´ì¥**

    â†’ ê°™ì€ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œëŠ” ê°™ì€ ì—”í‹°í‹° ë°˜í™˜

    â†’ ì•½ê°„ì˜ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ

2. **íŠ¸ëœì§ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ê¸° ì§€ì—° - insert**
    - íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í• ë•Œê¹Œì§€Â `INSERT SQL`ì„ ëª¨ìŒ
    - `JDBC BATCH SQL`ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ì„œ í•œë²ˆì—Â `SQL`Â ì „ì†¡

    ```java
    transaction.begin(); //íŠ¸ëœì­ì…˜ ì‹œì‘
    em.persist(memberA);
    em.persist(memberB);
    em.persist(memberC);
    //ì—¬ê¸°ê¹Œì§€ INSERT SQLë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ë³´ë‚´ì§€ ì•ŠëŠ”ë‹¤.

    //ì»¤ë°‹í•˜ëŠ” ìˆœê°„ ë°ì´í„°ë² ì´ìŠ¤ì— INSERT SQLë¥¼ ëª¨ì•„ì„œ ë³´ë‚¸ë‹¤.
    transaction.commit(); //íŠ¸ëœì­ì…˜ ì»¤ë°‹
    ```

3. **ì§€ì—° ë¡œë”©**ê³¼ ì¦‰ì‹œ ë¡œë”©
    - ì§€ì—°ë¡œë”© : ê°ì²´ê°€ ì‹¤ì œ ì‚¬ìš©ë  ë•Œ ë¡œë”©
        - ì´ë•Œ í•„ë“œì— ìˆëŠ” ê°ì²´ëŠ” ê°€ì§œ(í”„ë¡ì‹œ) ê°ì²´ì„
    - ì¦‰ì‹œ ë¡œë”©:Â `JOIN SQL`ë¡œ í•œë²ˆëœ ì—°ê´€ëœ ê°ì²´ê¹Œì§€ ë¯¸ë¦¬ ì¡°íšŒ
4. **ë™ì¼í•œ íŠ¸ëœì­ì…˜ì—ì„œ ì¡°íšŒí•œ ì—í‹°í‹°ëŠ” ê°™ìŒì„ ë³´ì¥**     
---     
> ì°¸ê³ ìë£Œ

[[JPA] JPAë€ - Heee's Development Blog](https://gmlwjd9405.github.io/2019/08/04/what-is-jpa.html)
